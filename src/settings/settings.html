<!DOCTYPE html>
<html>
<head>
  <title>Scam Blocker Settings</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=672">
  <style>
    body {
      font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
      background: linear-gradient(120deg, #f4f6fb 0%, #e0e7ff 100%);
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 0;
      display: flex;
      gap: 32px;
      justify-content: center;
      align-items: flex-start;
    }
    h1 {
      font-size: 2.2em;
      margin-bottom: 32px;
      color: #2563eb;
      font-weight: 800;
      letter-spacing: 1px;
      text-align: center;
      text-shadow: 0 2px 8px rgba(37,99,235,0.08);
    }
    h2 {
      font-size: 1.25em;
      color: #1e293b;
      font-weight: 700;
      margin-bottom: 18px;
      letter-spacing: 0.5px;
    }
    input[type="text"] {
      width: 100%;
      padding: 12px;
      border: 1px solid #c7d2fe;
      border-radius: 10px;
      font-size: 1.05em;
      margin-bottom: 14px;
      box-sizing: border-box;
      background: #f8fafc;
      transition: border 0.2s;
    }
    input[type="text"]:focus {
      border-color: #2563eb;
      outline: none;
    }
    button {
      background: linear-gradient(90deg, #2563eb 60%, #60a5fa 100%);
      color: #fff;
      border: none;
      border-radius: 10px;
      padding: 10px 22px;
      font-size: 1.05em;
      font-weight: 600;
      cursor: pointer;
      margin-top: 0;
      margin-bottom: 14px;
      box-shadow: 0 2px 8px rgba(37,99,235,0.08);
      transition: background 0.2s, box-shadow 0.2s;
    }
    button:hover {
      background: linear-gradient(90deg, #174ea6 60%, #2563eb 100%);
      box-shadow: 0 4px 16px rgba(37,99,235,0.12);
    }
    h3 {
      font-size: 1.05em;
      margin-top: 18px;
      margin-bottom: 8px;
      color: #374151;
      font-weight: 600;
      letter-spacing: 0.2px;
    }
    ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    li {
      background: #f8fafc;
      border-radius: 8px;
      margin-bottom: 8px;
      padding: 10px 14px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 1em;
      box-shadow: 0 1px 4px rgba(37,99,235,0.04);
      transition: box-shadow 0.2s;
    }
    li:hover {
      box-shadow: 0 2px 8px rgba(37,99,235,0.10);
    }
    .remove-btn {
      background: linear-gradient(90deg, #ef4444 60%, #f87171 100%);
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 5px 14px;
      font-size: 0.98em;
      font-weight: 600;
      cursor: pointer;
      margin-left: 10px;
      box-shadow: 0 1px 4px rgba(239,68,68,0.08);
      transition: background 0.2s, box-shadow 0.2s;
    }
    .remove-btn:hover {
      background: linear-gradient(90deg, #b91c1c 60%, #ef4444 100%);
      box-shadow: 0 2px 8px rgba(239,68,68,0.16);
    }
    .column {
      flex: 1;
      min-width: 320px;
      border-radius: 18px;
      padding: 38px 28px;
      box-shadow: 0 4px 24px rgba(37,99,235,0.10);
      background: #fff;
      display: flex;
      flex-direction: column;
      gap: 8px;
      position: relative;
    }
    .column.left {
      background: #e0e7ff;
    }
    .column.right {
      background: #f1f5f9;
    }
    label {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
      font-size: 1em;
      color: #334155;
      font-weight: 500;
      cursor: pointer;
      transition: color 0.2s;
    }
    label input[type="checkbox"] {
      accent-color: #2563eb;
      transform: scale(1.2);
      margin-right: 6px;
    }
    @media (max-width: 900px) {
      .container {
        flex-direction: column;
        gap: 24px;
        max-width: 98vw;
      }
      .column {
        padding: 28px 12px;
      }
    }
  </style>
</head>
  <body>
    <h1>Scam Blocker Settings</h1>
    <div class="container">
      <div class="column left">
        <h2>Add URL to Blocklist</h2>
        <input type="text" id="blockurl" placeholder="Enter URL or pattern to block (e.g. *example.com/*)" />
        <button id="clickme">Block URL</button>
        <h3 style="display:flex;align-items:center;gap:12px;">
          Default Blocked URLs
          <input type="checkbox" id="toggleDefaultBlocked" style="transform:scale(1.3);margin-left:8px;vertical-align:middle;" />
        </h3>
        <ul id="defaultBlockedList"></ul>
        <h3>Your Blocked URLs</h3>
        <ul id="blockedList"></ul>
      </div>
      <div class="column right">
        <h2 style="margin-top:0;">Email Scanning Features</h2>
        <div style="margin-bottom:18px;">
          <label>
            <input type="checkbox" id="toggleShowSenderBanner" />
            Show warning alert for suspicious senders
          </label>
          <label>
            <input type="checkbox" id="toggleScanSubject" />
            Scan subject for impersonation attempts
          </label>
          <label>
            <input type="checkbox" id="toggleScanBody" />
            Scan body for impersonation attempts
          </label>
        </div>
        <div style="background:#e0e7ff;border-radius:12px;padding:20px 18px;margin-top:8px;box-shadow:0 2px 12px rgba(37,99,235,0.08);font-size:1.05em;color:#1e293b;font-weight:500;">
          <strong>Currently Supported Webmail Providers</strong><br>
          <span style="font-size:0.98em;color:#334155;">Gmail & Outlook</span><br><br>
          <strong>Being Developed Webmail Providers</strong><br>
          <span style="font-size:0.98em;color:#334155;">Yahoo, ProtonMail, Zoho Mail, Spectrum, Roadrunner</span>
        </div>
        <div style="background:#fff7ed;border-radius:12px;padding:18px 16px;margin-top:18px;box-shadow:0 2px 12px rgba(251,146,60,0.08);font-size:1.05em;color:#7c2d12;font-weight:500;">
          <label for="bugReportInput" style="font-size:1em;color:#b45309;font-weight:600;display:block;margin-bottom:8px;">Bug Reports or Suggestions for URLs/Emails to be added</label>
          <div style="display:flex;justify-content:center;align-items:center;width:100%;margin-top:8px;">
            <a href="https://github.com/Miyso/ScamBlocker/issues" target="_blank" rel="noopener" style="display:inline-block;background:linear-gradient(90deg,#f59e42 60%,#fbbf24 100%);color:#fff;border:none;border-radius:8px;padding:8px 18px;font-size:1em;font-weight:600;cursor:pointer;box-shadow:0 1px 4px rgba(251,146,60,0.08);text-decoration:none;text-align:center;">Report or Suggest on GitHub</a>
          </div>
        </div>
      </div>
    </div>
  <script>
    // Simple input validation for block URL field
    document.addEventListener('DOMContentLoaded', function() {
      const blockUrlInput = document.getElementById('blockurl');
      const blockBtn = document.getElementById('clickme');
      const blockedList = document.getElementById('blockedList');
      const blockedListEmptyMsg = document.getElementById('blockedListEmptyMsg');
      let warnMsg = document.createElement('div');
      warnMsg.id = 'blockurl-warning';
      warnMsg.style.color = '#ef4444';
      warnMsg.style.fontSize = '0.98em';
      warnMsg.style.margin = '6px 0 0 0';
      warnMsg.style.display = 'none';
      blockUrlInput.parentNode.insertBefore(warnMsg, blockBtn.nextSibling);

      // Helper: get user blocked URLs from chrome.storage.local
      function getUserBlockedUrls(callback) {
        if (chrome && chrome.storage && chrome.storage.local) {
          chrome.storage.local.get(['userBlockedUrls'], function(result) {
            callback(Array.isArray(result.userBlockedUrls) ? result.userBlockedUrls : []);
          });
        } else {
          callback([]);
        }
      }

      // Helper: set user blocked URLs in chrome.storage.local
      function setUserBlockedUrls(urls, callback) {
        if (chrome && chrome.storage && chrome.storage.local) {
          chrome.storage.local.set({ userBlockedUrls: urls }, callback);
        } else {
          if (callback) callback();
        }
      }

      // Render blocked URLs list
      function renderBlockedList(urls) {
        blockedList.innerHTML = '';
        urls.forEach(function(url, idx) {
          const li = document.createElement('li');
          li.textContent = url;
          const removeBtn = document.createElement('button');
          removeBtn.className = 'remove-btn';
          removeBtn.textContent = 'Remove';
          removeBtn.onclick = function() {
            const newUrls = urls.slice(0, idx).concat(urls.slice(idx + 1));
            setUserBlockedUrls(newUrls, function() {
              renderBlockedList(newUrls);
            });
          };
          li.appendChild(removeBtn);
          blockedList.appendChild(li);
        });
      }

      // Validate input
      function validateUrlInput(value) {
        if (!value.trim()) return 'Please enter a URL or pattern.';
        if (!/^([*]?[\w.-]+\.[a-zA-Z]{2,}.*)$/.test(value.trim())) return 'Please enter a valid URL or pattern.';
        return '';
      }

      // Add new blocked URL
      blockBtn.addEventListener('click', function(e) {
        const value = blockUrlInput.value.trim();
        const error = validateUrlInput(value);
        if (error) {
          warnMsg.textContent = error;
          warnMsg.style.display = 'block';
          e.preventDefault();
          blockUrlInput.focus();
        } else {
          warnMsg.style.display = 'none';
          getUserBlockedUrls(function(urls) {
            if (!urls.includes(value)) {
              const newUrls = urls.concat([value]);
              setUserBlockedUrls(newUrls, () => {
                renderBlockedList(newUrls);
                blockUrlInput.value = '';
              });
            }
          });
        }
      });

      blockUrlInput.addEventListener('input', function() {
        const error = validateUrlInput(blockUrlInput.value);
        if (error) {
          warnMsg.textContent = error;
          warnMsg.style.display = 'block';
        } else {
          warnMsg.style.display = 'none';
        }
      });

      // Initial render
      getUserBlockedUrls(renderBlockedList);
    });
  </script>
  <script src="settings.js"></script>
</body>
</html>
